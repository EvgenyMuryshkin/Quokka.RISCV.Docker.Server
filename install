# image prep
apt-get update
apt-get install -y wget gnupg apt-utils git sudo

cd ~

# install .NET Core
# please refer to official guide for your OS
# https://docs.microsoft.com/en-us/dotnet/core/install/
wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
sudo dpkg -i packages-microsoft-prod.deb

sudo apt-get update; \
  sudo apt-get install -y apt-transport-https && \
  sudo apt-get update && \
  sudo apt-get install -y dotnet-sdk-3.1

rm -rf /tmp/dotnet-installer

# configure Quokka integration server
cd ~
cp -r ~/qrs/scripts/. ~
chmod 766 ~/update ~/launch
~/update

# install picorv32 and RISC-V toolchain 
apt-get install -y \
		autoconf automake autotools-dev curl libmpc-dev \
        libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo \
		gperf libtool patchutils bc zlib1g-dev libexpat1-dev

# place all stuff in home folder
cd ~
git clone https://github.com/cliffordwolf/picorv32.git
cd ~/picorv32
make download-tools
cd ~/picorv32
yes | make -j$(nproc) build-riscv32imc-tools

# cleanup
rm -rf /var/cache/distfiles/riscv*
rm -rf ./picorv32/riscv*

# now you can run ~/launch